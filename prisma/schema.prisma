// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
   provider = "prisma-client-js"
}

datasource db {
   provider = "sqlite"
   url      = env("DATABASE_URL")
}

model User {
   id    String @id @unique
   name  String
   email String @unique
   theme String @default("light")

   auth_session Session[]
   key          Key[]
   apiKeys      APIKey[]
}

model Session {
   id             String @id @unique
   user_id        String
   user_picture   String
   active_expires BigInt
   idle_expires   BigInt

   user User @relation(references: [id], fields: [user_id], onDelete: Cascade)

   @@index([user_id])
}

model Key {
   id              String  @id @unique
   hashed_password String?
   user_id         String

   user User @relation(references: [id], fields: [user_id], onDelete: Cascade)

   @@index([user_id])
}

model APIKey {
   id     String @id @unique @default(nanoid())
   name   String
   userId String

   User User @relation(fields: [userId], references: [id])

   @@unique([userId, name])
}
